{"ast":null,"code":"import _slicedToArray from\"C:/batches/Aug pp10/react/Google Classroom Project/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/batches/Aug pp10/react/Google Classroom Project/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState}from'react';import{makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import AppBar from'@material-ui/core/AppBar';import Toolbar from'@material-ui/core/Toolbar';import IconButton from'@material-ui/core/IconButton';import Typography from'@material-ui/core/Typography';import CloseIcon from'@material-ui/icons/Close';import Slide from'@material-ui/core/Slide';import'./JoinClass.css';import Avatar from'@material-ui/core/Avatar';import{TextField}from'@material-ui/core';import{useContext}from'react';import{authContext}from'../AuthProvider';import LetteredAvatar from'lettered-avatar';import{firestore}from'../lib/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{appBar:{position:'relative'},title:{marginLeft:theme.spacing(2),flex:1}};});var Transition=/*#__PURE__*/React.forwardRef(function Transition(props,ref){return/*#__PURE__*/_jsx(Slide,_objectSpread({direction:\"up\",ref:ref},props));});export default function FullScreenDialog(props){var classes=useStyles();var user=useContext(authContext);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),classCode=_useState2[0],setClassCode=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),ownersEmail=_useState4[0],setOwnersEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),joinedData=_useState8[0],setJoinedData=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),classExists=_useState10[0],setClassExists=_useState10[1];var handleSubmit=function handleSubmit(e){e.preventDefault();firestore.collection('Created Classes').doc(ownersEmail).collection('classes').doc(classCode).get().then(function(doc){if(doc.exists&&ownersEmail!==user.email){setClassExists(true);setJoinedData(doc.data());setError(false);console.log(doc);}else{setClassExists(false);setError(true);return;}});if(classExists===true){firestore.collection('Joined Classes').doc(user.email).collection('classes').doc(classCode).set({joinedData:joinedData});}console.log(props);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Dialog,{fullScreen:true,open:props.valueJoin.openJoin,onClose:props.valueJoin.handleCloseJoin,TransitionComponent:Transition,children:[/*#__PURE__*/_jsx(AppBar,{className:classes.appBar,children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"start\",color:\"inherit\",onClick:props.valueJoin.handleCloseJoin,\"aria-label\":\"close\",children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",className:classes.title,children:\"Join Class\"}),/*#__PURE__*/_jsx(Button,{autoFocus:true,color:\"inherit\",onClick:props.valueJoin.handleCloseJoin,children:\"JOIN\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"joinClass\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"joinClass__form\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"joinClass__formText\",children:\"You're currently signed in as logged in mail\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"joinClass__loginInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"joinClass__classLeft\",children:[/*#__PURE__*/_jsx(LetteredAvatar,{name:user&&!user.photoURL?\"\".concat(user.displayName):\"\",imgSrc:user?user.photoURL:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"joinClass__loginText\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"joinClass__loginName\",children:user?user.displayName:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"joinClass__loginEmail\",children:user?user.email:\"\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"joinClass__form\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Class code\"}),/*#__PURE__*/_jsx(\"div\",{children:\"ask your teacher/owner for class code\"}),/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",id:\"name\",label:\"Class Code\",type:\"email\",fullWidth:true,value:classCode,onChange:function onChange(e){setClassCode(e.currentTarget.value);},error:error,helperText:error&&\"No class exist\"}),/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",id:\"name\",label:\"Owner's Email\",type:\"email\",fullWidth:true,value:ownersEmail,onChange:function onChange(e){setOwnersEmail(e.currentTarget.value);},error:error,helperText:error&&\"No class exist\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"outlined\",color:\"primary\",children:\"JOIN\"})]})]})]})});}","map":{"version":3,"sources":["C:/batches/Aug pp10/react/Google Classroom Project/app/src/JoinClass/JoinClass.js"],"names":["React","useState","makeStyles","Button","Dialog","AppBar","Toolbar","IconButton","Typography","CloseIcon","Slide","Avatar","TextField","useContext","authContext","LetteredAvatar","firestore","useStyles","theme","appBar","position","title","marginLeft","spacing","flex","Transition","forwardRef","props","ref","FullScreenDialog","classes","user","classCode","setClassCode","ownersEmail","setOwnersEmail","error","setError","joinedData","setJoinedData","classExists","setClassExists","handleSubmit","e","preventDefault","collection","doc","get","then","exists","email","data","console","log","set","valueJoin","openJoin","handleCloseJoin","photoURL","displayName","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport './JoinClass.css';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { TextField } from '@material-ui/core';\r\nimport { useContext } from 'react';\r\nimport { authContext } from '../AuthProvider';\r\nimport LetteredAvatar from 'lettered-avatar'\r\nimport { firestore } from '../lib/firebase';\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\r\n        position: 'relative',\r\n    },\r\n    title: {\r\n        marginLeft: theme.spacing(2),\r\n        flex: 1,\r\n    },\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n\r\n\r\nexport default function FullScreenDialog(props) {\r\n    const classes = useStyles();\r\n    let user = useContext(authContext);\r\n    let [classCode, setClassCode] = useState(\"\");\r\n    let [ownersEmail, setOwnersEmail] = useState(\"\");\r\n    let [error, setError] = useState(\"\");\r\n    let [joinedData, setJoinedData] = useState(\"\");\r\n    let [classExists, setClassExists] = useState(\"\");\r\n    let handleSubmit=(e)=>{\r\n        e.preventDefault();\r\n        firestore.collection('Created Classes')\r\n        .doc(ownersEmail)\r\n        .collection('classes')\r\n        .doc(classCode)\r\n        .get().then((doc)=>{\r\n            if(doc.exists && ownersEmail !== user.email){\r\n                setClassExists(true);\r\n                setJoinedData(doc.data());\r\n                setError(false);\r\n                console.log(doc)\r\n            }\r\n            else{\r\n                setClassExists(false);\r\n                setError(true);\r\n                return\r\n            }\r\n        \r\n        })\r\n        if(classExists===true){\r\n            firestore.collection('Joined Classes')\r\n            .doc(user.email)\r\n            .collection('classes')\r\n            .doc(classCode)\r\n            .set({\r\n                joinedData,\r\n            })\r\n        }\r\n        console.log(props)\r\n    }\r\n    return (\r\n        <div>\r\n            <Dialog fullScreen open={props.valueJoin.openJoin} onClose={props.valueJoin.handleCloseJoin} TransitionComponent={Transition}>\r\n                <AppBar className={classes.appBar}>\r\n                    <Toolbar>\r\n                        <IconButton edge=\"start\" color=\"inherit\" onClick={props.valueJoin.handleCloseJoin} aria-label=\"close\">\r\n                            <CloseIcon />\r\n                        </IconButton>\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            Join Class\r\n                        </Typography>\r\n                        <Button autoFocus color=\"inherit\" onClick={props.valueJoin.handleCloseJoin}>\r\n                            JOIN\r\n                        </Button>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <div className=\"joinClass\">\r\n                    <div className=\"joinClass__form\">\r\n                        <p className=\"joinClass__formText\">\r\n                            You're currently signed in as logged in mail\r\n                        </p>\r\n                        <div className=\"joinClass__loginInfo\">\r\n                            <div className=\"joinClass__classLeft\">\r\n                                <LetteredAvatar name={user && !(user.photoURL) ? `${user.displayName}` : \"\"} \r\n                                imgSrc={user ? user.photoURL : \"\"} />\r\n                                <div className=\"joinClass__loginText\">\r\n                                    <div className=\"joinClass__loginName\">\r\n                                        {user ? user.displayName : \"\"}\r\n                                    </div>\r\n                                    <div className=\"joinClass__loginEmail\">\r\n                                        {user ? user.email : \"\"}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <Button variant=\"outlined\" color=\"primary\">\r\n                                Logout\r\n                            </Button>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"joinClass__form\">\r\n                        <h5>Class code</h5>\r\n                        <div>ask your teacher/owner for class code</div>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"name\"\r\n                            label=\"Class Code\"\r\n                            type=\"email\"\r\n                            fullWidth\r\n                            value={classCode}\r\n                            onChange={(e) => {\r\n                                setClassCode(e.currentTarget.value);\r\n                            }}\r\n                            error={error}\r\n                            helperText={error && \"No class exist\"}\r\n                        />\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"name\"\r\n                            label=\"Owner's Email\"\r\n                            type=\"email\"\r\n                            fullWidth\r\n                            value={ownersEmail}\r\n                            onChange={(e) => {\r\n                                setOwnersEmail(e.currentTarget.value);\r\n                            }}\r\n                            error={error}\r\n                            helperText={error && \"No class exist\"}\r\n\r\n                        />\r\n                        <Button onClick={handleSubmit}\r\n                        variant=\"outlined\" color=\"primary\">\r\n                            JOIN\r\n                        </Button>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </Dialog>\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}